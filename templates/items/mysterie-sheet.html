<form class="{{cssClass}}" autocomplete="off">

	<div class="sheet-item">
		<header class="sheet-header item-top">
            <div style="display: flex;">
                <div style="min-width: 110px;">
					<img src="{{EON.CONFIG.ikoner.mysterie}}" class="item img-block" />
				</div>

				<div class="pullLeft" style="min-width: 270px;">
					<div class="item-property-area number-value-text floating-label-group">
						<input class="text-value editable" type="text" name="name" value="{{item.name}}" data-dtype="String" autocomplete="off" autofocus required />
						<span class="floating-label">Namn</span>
					</div>						

					<div class="item-property-area number-value-text floating-label-group">
						<input class="text-value editable" name="system.omfang" type="text" value="{{data.system.omfang}}" data-dtype="String" />
						<span class="floating-label">Omfang</span>
					</div>

					<div class="item-property-area number-value-text floating-label-group">
						<input class="text-value editable" name="system.rackvidd" type="text" value="{{data.system.rackvidd}}" data-dtype="String" />
						<span class="floating-label">Räckvidd</span>
					</div>

					<div class="item-property-area number-value-text floating-label-group">
						<input class="attribute-value editable" name="system.magnitud" type="text" value="{{data.system.magnitud}}" data-dtype="Number" />
						<span class="floating-label">Magnitud</span>
					</div>

					<div class="item-property-area number-value-text floating-label-group">
						<input class="text-value editable" name="system.varaktighet" type="text" value="{{data.system.varaktighet}}" data-dtype="String" />
						<span class="floating-label">Varaktighet</span>
					</div>

					<div class="item-property-area number-value-text floating-label-group">
						<input class="text-value editable" name="system.referens" type="text" value="{{data.system.referens}}" data-dtype="String" />
						<span class="floating-label">Referens</span>
					</div>
				</div>			
			
				<div class="pullLeft" style="flex-grow: 1; text-align: right;">
					{{#if hasActor}}
						<div class="pointer red item-delete large-icon" data-itemid="{{item._id}}"><i class="icon fa-solid fa-trash-can"></i></div>
					{{/if}}     
					
					<div class="information-area top-sidetext">MYSTERIE</div>
				</div>
			</div>	

		</header>
		
		<section class="item-body">
			<div class="clear">
				<div class="pullLeft large-headline">Moment</div>
				<div class="pullRight pointer item-create" title="Lägg till moment" data-type="moment"><i class="fa-solid fa-square-plus green"></i></div>
			</div>

			<div class="clear headline" style="line-height: 25px; width:100%;">
				<div class="pullLeft active-icon">&nbsp;</div>
				<div class="pullLeft" style="width: 150px;">Färdighet</div>
				<div class="pullLeft" style="width: 100px;">Svårighet</div>
				<div class="pullLeft" style="width: 100px;">Tid</div>
			</div>

			{{#each data.system.moment as |item key|}}
				<div class="clear" style="line-height: 25px; width:100%;">
					<div class="pullLeft active-icon"><input class="pointer item-active" type="checkbox" id="object.huvud_{{key}}" title="Huvudmomentet" value="{{item.huvud}}" data-source="moment" data-key="{{key}}" data-egenskap="huvud" {{isChecked item.huvud}} /></div>
					<div class="pullLeft">
						<select class="inputdata" id="object.fardighet_{{key}}" data-source="moment" data-key="{{key}}" data-egenskap="fardighet" style="width: 150px;">
							<option>- Välj -</option>
							{{#select item.fardighet}}
								{{#each ../EON.fardigheter.mystik as |fardighet key|}}
									<option value="{{key}}">{{fardighet.namn}}</option>
								{{/each}}
							{{/select}}
						</select>
					</div>        
					<div class="pullLeft"><input class="inputdata" type="text" value="{{item.svarighet}}" id="object.svarighet_{{key}}" data-source="moment"  data-key="{{key}}" data-egenskap="svarighet" style="width: 100px;" /></div>
					<div class="pullLeft"><input class="inputdata" type="text" value="{{item.tid}}" id="object.tid_{{key}}" data-source="moment"  data-key="{{key}}" data-egenskap="tid" style="width: 100px;" /></div>
					<div class="pullLeft pointer red item-delete" title="Ta bort moment" data-type="moment" data-key="{{key}}"><i class="icon fa-solid fa-trash-can"></i></div>
				</div>
			{{/each}}

			<div class="clear">
				<div class="pullLeft two-column">
					<div class="textbox-headline">Mirakel</div>
					<div class="small-editor-box">
						{{editor data.system.mirakel target="system.mirakel" button=true owner=owner editable=true}}
					</div>
				</div> 
				<div class="pullLeft two-column">
					<div class="textbox-headline">Cermoni</div>
					<div class="small-editor-box">
						{{editor data.system.cermoni target="system.cermoni" button=true owner=owner editable=true}}
					</div>
				</div>
			</div>			

			<div>
				<div class="large-headline">Beskrivning</div>
				<div class="small-editor-box">
					{{editor data.system.beskrivning target="system.beskrivning" button=true owner=owner editable=true}}
				</div>
			</div>
		</section>

	</div>
</form>