<form class="{{cssClass}}" autocomplete="off">

	<div class="sheet-item">
		<header class="sheet-header item-top">
				
            <div style="display: flex;">
                <div style="min-width: 110px;">
					<img src="{{EON.CONFIG.ikoner.besvarjelse}}" class="item img-block" />
				</div>

				<div class="item-area pullLeft">
					<div class="item-top">
						<div class="item-section">
							<div class="item-property-area number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="name" value="{{item.name}}" data-dtype="String" autocomplete="off" autofocus required />
								<span class="floating-label">Namn</span>
							</div>		

							<div class="item-property-area" style="display: flex; flex-direction: row;">

								<div class="dual-box number-value-text floating-label-group">
									<select class="text-value" name="system.aspekt">
										<option value="">- Välj -</option>
										{{#select item.system.aspekt}}										
											{{#each EON.CONFIG.aspekter as |aspekt key|}}
												<option value="{{key}}">{{aspekt}}</option>
											{{/each}}
										{{/select}}
									</select>
									<span class="floating-label">Aspekt</span>
								</div>	

								<div class="dual-box-right number-value-text floating-label-group">
									<input class="attribute-value editable" type="text" name="system.svarighet" value="{{item.system.svarighet}}" data-dtype="Number" autocomplete="off" autofocus required />
									<span class="floating-label">Svårighet</span>
								</div>

							</div>

							<div class="item-property-area number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="system.forsvar" value="{{item.system.forsvar}}" data-dtype="String" autocomplete="off" autofocus required />
								<span class="floating-label">Försvar</span>
							</div>
						
							<div class="item-property-area number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="system.anfall" value="{{item.system.anfall}}" data-dtype="String" autocomplete="off" autofocus required />
								<span class="floating-label">Anfall</span>
							</div>

							<div class="item-property-area number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="system.referens" value="{{item.system.referens}}" data-dtype="String" autocomplete="off" autofocus required />
								<span class="floating-label">Referens</span>
							</div>	
						</div>				
					</div>         
				</div>

				<div class="pullLeft" style="flex-grow: 1; text-align: right;">
                    {{#if hasActor}}
                        <div class="pointer red item-delete large-icon" data-itemid="{{item._id}}"><i class="icon fa-solid fa-trash-can"></i></div>
                    {{/if}}     
                    
                    <div class="information-area top-sidetext">BESVÄRJELSE</div>
                </div>

			</div>		
		</header>
		
		<section class="item-body">
			<div class="item-section">

				<div style="display: flex; flex-direction: row;">
					<div>
						<!-- 
							Vid 0 gör antal/typ mål enabled och antal sätts till 1.
							Vid > 0 antal/typ mål not enabled och nollställ.
						-->

						<div class="item-property-area number-value-text floating-label-group">
							<select class="text-value" name="system.omfang.yta">
								{{#select item.system.omfang.yta}}	
									<option value="0">- Skräddarsydd -</option>									
									{{#each EON.CONFIG.magi.omradesomfang as |yta key|}}
										<option value="{{key}}">{{yta}}</option>
									{{/each}}
								{{/select}}
							</select>
							<span class="floating-label">Omfång</span>
						</div>

						<div class="item-property-area" style="display: flex; flex-direction: row;">

							<div class="number-value-text floating-label-group">
								<input class="attribute-value editable" type="text" name="system.omfang.antal" value="{{item.system.omfang.antal}}" data-dtype="Number" {{#if (eq item.system.omfang.yta 0)}}autocomplete="off" autofocus required{{else}}disabled readonly{{/if}} />
								<span class="floating-label">Antal mål</span>
							</div>

							<div class="dual-box-right number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="system.omfang.text" value="{{item.system.omfang.text}}" data-dtype="String" {{#if (eq item.system.omfang.yta 0)}}autocomplete="off" autofocus required{{else}}disabled readonly{{/if}} />
								<span class="floating-label">Typ av mål</span>
							</div>		
							
						</div>

					</div>
					<div>

						<!-- 
							Vid 0 gör antal/text enabled så man kan fylla i en egen.
							Vid > 0 nollställ antal/text och not enabled
						-->
						<div class="item-property-area number-value-text floating-label-group">
							<select class="text-value" name="system.rackvidd.stracka">
								{{#select item.system.rackvidd.stracka}}										
									<option value="0">- Skräddarsydd -</option>	
									{{#each EON.CONFIG.magi.rackvidd as |rackvidd key|}}
										<option value="{{key}}">{{rackvidd}}</option>
									{{/each}}
								{{/select}}
							</select>
							<span class="floating-label">Räckvidd</span>
						</div>

						<div class="item-property-area" style="display: flex; flex-direction: row;">

							<div class="number-value-text floating-label-group">
								<input class="attribute-value editable" type="text" name="system.rackvidd.antal" value="{{item.system.rackvidd.antal}}" data-dtype="Number" {{#if (eq item.system.rackvidd.stracka 0)}}autocomplete="off" autofocus required{{else}}disabled readonly{{/if}} />
								<span class="floating-label">Sträcka</span>
							</div>

							<div class="dual-box-right number-value-text floating-label-group">
								<input class="text-value editable" type="text" name="system.rackvidd.text" value="{{item.system.rackvidd.text}}" data-dtype="String" {{#if (eq item.system.rackvidd.stracka 0)}}autocomplete="off" autofocus required{{else}}disabled readonly{{/if}} />
								<span class="floating-label">Sträcktyp</span>
							</div>

						</div>

					</div>
				</div>

			</div>						

			<!-- 
				Väljer man 0 kan man sätta de tre checkboxarna.
				Väljer man > 0 sätts alla checkboxarna till false.
			 -->

			<div class="item-section">
				<div class="item-property-area number-value-text floating-label-group">
					<select class="text-value" name="system.varaktighet.tid">
						{{#select item.system.varaktighet.tid}}										
							<option value="0">- Tillfällig -</option>	
							{{#each EON.CONFIG.magi.varaktighet as |varaktighet key|}}
								<option value="{{key}}">{{varaktighet}}</option>
							{{/each}}
						{{/select}}
					</select>
					<span class="floating-label">Varaktighet</span>
				</div>

				<div class="clear">
					<div class="pullLeft" style="width: 100px;">Koncentration</div>
					<div class="pullLeft"><input class="varaktighet pointer" type="checkbox" {{isChecked data.system.varaktighet.koncentration}} data-dtype="Boolean" data-field="varaktighet.koncentration" {{#if (gt item.system.varaktighet.tid 0)}}disabled readonly{{/if}} />
					</div>
				</div>

				<div class="clear">
					<div class="pullLeft" style="width: 100px;">Momentan</div>
					<div class="pullLeft"><input class="varaktighet pointer" type="checkbox" {{isChecked data.system.varaktighet.momentan}} data-dtype="Boolean" data-field="varaktighet.momentan" {{#if (gt item.system.varaktighet.tid 0)}}disabled readonly{{/if}} /></div>
				</div>

				<div class="clear">
					<div class="pullLeft" style="width: 100px;">Immanent</div>
					<div class="pullLeft"><input class="varaktighet pointer" type="checkbox" {{isChecked data.system.varaktighet.immanent}} data-dtype="Boolean" data-field="varaktighet.immanent" {{#if (gt item.system.varaktighet.tid 0)}}disabled readonly{{/if}} /></div>
				</div>
			</div>

			<div class="clear">
				<div class="pullLeft large-headline">Ritualer</div>
				<div class="pullRight pointer item-create" title="Lägg till ritual" data-type="ritual"><i class="fa-solid fa-square-plus green"></i></div>
			</div>

			<div class="clear">
				<div class="pullLeft large-headline">Magnitudförstärkningar</div>
				<div class="pullRight pointer item-create" title="Lägg till magnitudförstärkningar" data-type="magnitudforstarkningar"><i class="fa-solid fa-square-plus green"></i></div>
			</div>
			
			<div class="large-headline">Beskrivning</div>
			<div class="small-editor-box">
				{{editor data.system.beskrivning target="system.beskrivning" button=true owner=owner editable=true}}
			</div>
		</section>

	</div>
</form>